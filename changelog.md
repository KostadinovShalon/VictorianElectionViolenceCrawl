# Change Log

All notable changes since version 1.28.1 will be documented in this file.

The format is based on [Keep a Changelog](http://keepachangelog.com/en/1.0.0/)
and this project adheres to [Semantic Versioning](http://semver.org/spec/v2.0.0.html).

## [1.29.2] - 2018-08.16
### Changed
- CSV for candidate documents was reformatted. Added g_status and status_writer columns

## [1.29.1] - 2018-08-14
### Fixed
- When portal document files failed to be uploaded to the server, their candidate status was not updated.

## [1.29.0] - 2018-08-12
### Added
- A generate_candidates.py script was added to get candidate documents after a crawl
- An *slow* option to retry the downloading of candidate files
- Searches are cached for one hour
- User agents are randomly selected for each crawl

### Changed
- The update_pdf_files.py script keeps running if a document fails
- The spiders do not generate the csv with the candidate documents anymore. This step was causing the crawler to slow down dramatically after a few pages (barely 1 page/min). 
Now, with this change, at least a speed of 14 pages/min was achieved in fast mode (a faster crawl may be achieved by changing the DOWNLOAD_DELAY parameter in settings.py).
To get the candidate documents related with a search, the generate_candidates.py script is provided.
- SQLAlchemy session is now global.
- Article pdfs are now generated with absolute coordinates and not in a column fashion (see document 1281)

### Fixed
- Some portal document pdfs could not been downloaded.

## [1.28.3] - 2018-08-10
### Added
- Advanced search parameters are stored in the database

### Fixed
- Some candidate documents could not be uploaded into the database because their 'article_title' field

## [1.28.2] - 2018-08-07
### Changed
- Dates from the advanced search xlsx file are now formatted as text (date must use the format yyyy-mm-dd)
- JSON files are not generated by default. If a JSON file has to be generated, use generate_json=true
- Slow mode runs without generating the JSON

## [1.28.1] - 2018-08-06
### Added
- Fast mode operation (no OCRs are downloaded)
- A new script called ocr_updater was added to download the OCR of those files crawled in fast mode
- The option of generating the JSON file (only in fast mode)
- Advanced search added. An XLSX file is provided to define the search terms
- Documentation is provided in the [README.md](/README.md) file

### Changed
- Complementary scripts like update_pdf_files.py were moved to the root folder. *Tools* folder was removed
- *openpyxl 2.5.5 was added to the requirements*
